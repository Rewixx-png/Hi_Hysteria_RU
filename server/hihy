#!/bin/bash

# Определяем путь к скрипту, чтобы импорты работали правильно
BASE_DIR=$(dirname "$(readlink -f "$0")")
LIB_DIR="$BASE_DIR/lib"

# Импортируем модули (порядок важен!)
if [ -f "$LIB_DIR/utils.sh" ]; then
    source "$LIB_DIR/utils.sh"
else
    echo "Error: utils.sh not found in $LIB_DIR"
    exit 1
fi

if [ -f "$LIB_DIR/core.sh" ]; then
    source "$LIB_DIR/core.sh"
else
    echo "Error: core.sh not found in $LIB_DIR"
    exit 1
fi

if [ -f "$LIB_DIR/menu.sh" ]; then
    source "$LIB_DIR/menu.sh"
else
    echo "Error: menu.sh not found in $LIB_DIR"
    exit 1
fi

# Проверка на root права (функция из utils.sh)
check_root

# Если скрипт запущен с аргументами (например hihy 5), выполняем команду
if [[ -n "$1" ]]; then
    run_command "$1"
else
    # Иначе показываем лого и меню
    logo
    show_menu
fi